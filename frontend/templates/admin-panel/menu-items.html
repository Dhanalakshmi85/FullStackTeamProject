{% extends "layout.html" %}
{% block content %}

<h2 class="mb-4" style="color:#4a004e;">Menu Items</h2>

<button type="button" class="btn btn-custom mb-3" data-bs-toggle="modal" data-bs-target="#addMenuItemModal">
    + Add New Item
</button>

{% if menu|length == 0 %}
<div class="alert alert-warning text-center">No menu items found.</div>
{% endif %}

<table class="table table-striped table-hover align-middle">
    <thead>
        <tr>
            <th>Name</th>
            <th>Category</th>
            <th>Price (€)</th>
            <th>Image</th>
            <th>Actions</th>
        </tr>
    </thead>

    <tbody>
    {% for item in menu %}
        <tr>
            <td>{{ item.name }}</td>
            <td>{{ item.category }}</td>
            <td>{{ item.price }}</td>

            <td>
                {% if item.image %}
                    <img src="{{ item.image }}" style="width:60px;height:60px;border-radius:8px;">
                {% else %}
                    <span>No Image</span>
                {% endif %}
            </td>

            <td>
                <a href="/admin/menu/edit/{{ item._id }}" class="btn btn-secondary btn-sm">Edit</a>

                <form action="/admin/menu/delete/{{ item._id }}" method="POST" style="display:inline;">
                    <button class="btn btn-danger btn-sm" onclick="return confirm('Delete this item?')">Delete</button>
                </form>
            </td>
        </tr>
    {% endfor %}
    </tbody>
</table>

<!-- ADD ITEM MODAL -->
<div class="modal fade" id="addMenuItemModal" tabindex="-1">
  <div class="modal-dialog">
    <div class="modal-content">

      <div class="modal-header">
        <h5 class="modal-title">Add New Menu Item</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
      </div>

      <form method="POST" action="/admin/menu/add">
        <div class="modal-body">

          <label class="form-label">Name</label>
          <input type="text" class="form-control" name="name" required>

          <label class="form-label mt-2">Description</label>
          <textarea class="form-control" name="description" required></textarea>

          <label class="form-label mt-2">Category</label>
          <select class="form-select" name="category" required>
            <option disabled selected>Select category</option>
            <option value="north_indian">North Indian</option>
            <option value="south_indian">South Indian</option>
            <option value="sri_lankan">Sri Lankan</option>
          </select>

          <label class="form-label mt-2">Price (€)</label>
          <input type="number" class="form-control" name="price" step="0.01" required>

          <label class="form-label mt-2">Image URL</label>
          <input type="text" class="form-control" name="image_url">
        </div>

        <div class="modal-footer">
          <button class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
          <button class="btn btn-custom">Add</button>
        </div>

      </form>

    </div>
  </div>
</div>

{% endblock %}

